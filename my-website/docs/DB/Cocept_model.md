---
title: Концептуальная модель БД
sidebar_position: 1
---

# Концептуальная модель данных

Представлена концептуальная модель:



**Итоговая модель:**

![ДЗ БД концептуальная модель 4.jpg](https://cdn.buildin.ai/s3/7de16dc0-ba63-44e3-9366-f85e2dc18ef5/%25D0%2594%25D0%2597%2B%25D0%2591%25D0%2594%2B%25D0%25BA%25D0%25BE%25D0%25BD%25D1%2586%25D0%25B5%25D0%25BF%25D1%2582%25D1%2583%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D0%25B0%25D1%258F%2B%25D0%25BC%25D0%25BE%25D0%25B4%25D0%25B5%25D0%25BB%25D1%258C%2B4.jpg?time=1733436900&token=1149acabba33bd2cc4a5d9af1df41edb&role=sharePaid)

Подробное описание основныхе сущностей и атрибутов и связей между ними:

1. Начнем с **организации**.

| Сущность      | Атрибут              | Тип данных      | Пример значения                                                                                  |
|---------------|----------------------|-----------------|--------------------------------------------------------------------------------------------------|
| Организация   | ID                  | INT             | 13                                                                                               |
|               | Название            | VARCHAR(255)    | Фонд помощи детям                                                                                |
|               | Описание деятельности | VARCHAR(2500)   | Фонд помощи детям основан в таком-то году и осуществляет такую-то деятельность, сотрудничает с такими-то компаниями. |
|               | Сайт                | VARCHAR(255)    | fondpomochi.ru                                                                                  |
|               | Почта               | VARCHAR(255)    | fondpomochi@yandex.ru                                                                           |
|               | Номер телефона      | VARCHAR(10)     | 88005553535                                                                                     |

Для организации еще необходимо хранить следующие данные: адрес, направления деятельности. Направлений деятельности у одной организации или волонтера может быть много, поэтому данные о направлениях будут храниться в отдельной таблице. С другой стороны одно направление деятельности может быть в сфере интерснов разных волонтеров и разных организаций. **Связь**: **многие ко многим.** 

У одного волонтера может быть несколько сохранных адресов, поэтому данные об адресе будут храниться в отдельной таблице. **Связь**: **один ко многим**. Информацию об адресе организация я решила вынести также в эту отдельную таблицу для удобства. Если в будущем потребуется изменить логику систему так, чтобы одна организация могла иметь нескольо адресов (пример: филиалы), не придется менять сущность организация.

2. Сущность **волонтер.**

| Сущность  | Атрибут        | Тип данных    | Пример значения     |
|-----------|----------------|---------------|---------------------|
| Волонтер  | ID             | INT           | 13                  |
|           | Фамилия        | VARCHAR(255)  | Бургеркингов        |
|           | Имя            | VARCHAR(255)  | Василий             |
|           | Отчество       | VARCHAR(255)  |                     |
|           | Почта          | VARCHAR(255)  | vasya@yandex.ru     |
|           | Номер телефона | VARCHAR(10)   | 88005553535         |

У одного волонтера может быть несколько временных слотов, поэтому данные будут храниться в отдельной таблице. **Связь**: **один ко многим.** 

3. Сущность **заявка.**

| Сущность  | Атрибут                          | Тип данных    | Пример значения                                |
|-----------|----------------------------------|---------------|----------------------------------------------|
| Заявка    | ID                               | INT           | 13                                           |
|           | Название                         | VARCHAR(255)  | Посадка деревьев                             |
|           | ID организации                   | INT           | 12                                           |
|           | Функционал волонтеров            | VARCHAR(2500) | мыть пол, стирать белье, кормить белок       |
|           | Дата и время начала             | DATETIME      | 2024-12-12 20:00                             |
|           | Дата и время конца              | DATETIME      | 2024-12-12 22:00                             |
|           | Максимальное количество волонтеров | INT        | 25                                           |
|           | ID статуса заявки                | INT           | 2                                            |
|           | Текущее количество волонтеров   | INT           | 12                                           |

**Примечание**: Атрибут "текущее количество волонтеров" дублирует данные, которые можно получить с помощью подсчета строк из таблицы "волонтеры по заявке". Денормализация в данном случае оправдана и позволит повысить эффективность системы. Информация о количестве волонтеров постоянно будет показываться пользователю в ленте заявок. Таким образом, если не добавлять доп атрибут "количество волонтеров", то фронтенду придется создавать много запросов к БД и постоянно выполнять count волонтеров из таблицы "волонтеры по заявке".

Также для этой сущности необходима следующая информация: какие волонтеры записались, какие волонтеры встали в лист ожидания. **Связь: многие ко многим.** Один волонтер может записаться на несколько заявок, на одну заявку записано несколько волонтеров. Для разрешения этой связи будет использована дополнительная таблица.

Далее рассмотрим таблицы, которые хранят информацию о заявках, волонтерах и организациях.

4. Сущность **статус заявки**

| Сущность      | Атрибут  | Тип данных   | Пример значения     |
|---------------|----------|--------------|---------------------|
| Статус заявки | ID       | INT          | 13                  |
|               | Название | VARCHAR(100) | отменена фондом     |

5. Сущность **направление деятельности**

| Сущность             | Атрибут  | Тип данных   | Пример значения     |
|-----------------------|----------|--------------|---------------------|
| Направление деятельности | ID   | INT          | 13                  |
|                       | Название | VARCHAR(100) | помощь животным     |

Для разрешения связи многие ко многим между парами сущеностей "волонтер-направление" и "организация-направление" создадим дополниельную таблицу. Можно создать две отдельные таблицы, но, мне кажется, будет удобнее хранить даные в одной таблице указав тип объекта.  В таблицу добавим дополнительный атрибут "тип объекта", который может принимать два значения: волонтер, организация.

6. Таблица **связь направлений и пользователей**


| Атрибут                 | Тип данных    | Пример значения |
|-------------------------|---------------|-----------------|
| ID                      | INT           | 13              |
| Тип объекта             | VARCHAR(20)   | фонд            |
| ID объекта              | INT           | 13              |
| ID направления деятельности | INT       | 7               |


Таким образом, если организация специализируется на трех напрвлениях деятельности, в таблице эту информацию будут отображать три строки, у которых Тип объекта = фонд, ID объекта = ID организации повторяются во всех трех строках.

7. Таблица **связь адресов и пользователей.**



| Атрибут      | Тип данных   | Пример значения          |
|--------------|--------------|--------------------------|
| ID           | INT          | 13                       |
| Тип объекта  | VARCHAR(20)  | фонд                    |
| ID объекта   | INT          | 13                       |
| Адрес        | VARCHAR(255) | ул. Пушкина д. 45        |


8. Таблица **временные слоты волонтеров.**

| Атрибут       | Тип данных    | Пример значения |
|---------------|---------------|-----------------|
| ID            | INT           | 13              |
| ID волонтера  | INT           | 13              |
| Время начала  | TIME          | 18:00           |
| Время конца   | TIME          | 20:00           |
| День недели   | VARCHAR(100)  | пятница         |

9. Таблица **волонтеры по заявке**

В этой таблице будут храниться данные о волонтерах, которые записывались на эту заявку.

| Атрибут      | Тип данных   | Пример значения |
|--------------|--------------|-----------------|
| ID           | INT          | 13              |
| ID заявки    | INT          | 13              |
| ID волонтера | INT          | 18              |
| Статус       | INT          | 1               |
| Посещение    | INT          | 1               |


В атрибуте Посещение значение 1 соответсвует посещению волонтера, 0 - тому, что волонтер не пришел.

10. Таблица **статус волонтера**

| Сущность           | Атрибут  | Тип данных   | Пример значения      |
|--------------------|----------|--------------|----------------------|
| Статус волонтера   | ID       | INT          | 13                   |
|                    | Название | VARCHAR(100) | в листе ожидания     |


В таблице будут храниться статусы: записан, в листе ожидания, отказался.

11. Таблица **история записи**

Для отчетности также будет заведена таблица, в которую будут дампиться все изменения статуса волонтеров по заявке. Например, из таблицы можно будет получить инфо о том, когда человек отказался от заявки.

| Атрибут                        | Тип данных   | Пример значения |
|--------------------------------|--------------|-----------------|
| ID                             | INT          | 13              |
| ID строки из таблицы "волонтеры по заявке" | INT          | 13              |
| Статус старый                  | INT          | 1               |
| Статус новый                   | INT          | 2               |
| Время изменения                | TIME         | 20:00           |


Примечание: ID строки из таблицы "волонтеры по заявке" уже хранит в себе данные об ID волонтера и ID заявки, поэтому нет нужды дублировать эти данные в таблице с историей.



